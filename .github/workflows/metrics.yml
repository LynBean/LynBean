name: Metrics
on:
    schedule:
        - cron: "0 16 * * *"

    workflow_dispatch:

jobs:
    metrics:
        runs-on: ubuntu-latest
        steps:
            - name: Metrics.Base
              if: ${{ success() || failure() }}
              uses: lowlighter/metrics@latest
              with:
                  filename: metrics.base.svg
                  output_action: gist
                  committer_gist: ${{ secrets.GIST_ID }}
                  token: ${{ secrets.GITHUB_TOKEN }}

                  base: header, activity, community, repositories, metadata
                  base_indepth: yes

            - name: Metrics.Achievements
              if: ${{ success() || failure() }}
              uses: lowlighter/metrics@latest
              with:
                  filename: metrics.achievements.svg
                  output_action: gist
                  committer_gist: ${{ secrets.GIST_ID }}
                  token: ${{ secrets.GITHUB_TOKEN }}
                  base: ""

                  plugin_achievements: yes
                  plugin_achievements_display: compact

            - name: Metrics.Activity
              if: ${{ success() || failure() }}
              uses: lowlighter/metrics@latest
              with:
                  filename: metrics.activity.svg
                  output_action: gist
                  committer_gist: ${{ secrets.GIST_ID }}
                  token: ${{ secrets.GITHUB_TOKEN }}
                  base: ""

                  plugin_activity: yes
                  plugin_activity_limit: 5
                  plugin_activity_days: 28
                  plugin_activity_visibility: all
                  plugin_activity_timestamps: yes
                  plugin_activity_filter: all

            - name: Metrics.Languages
              if: ${{ success() || failure() }}
              uses: lowlighter/metrics@latest
              with:
                  filename: metrics.languages.svg
                  output_action: gist
                  committer_gist: ${{ secrets.GIST_ID }}
                  token: ${{ secrets.GITHUB_TOKEN }}
                  base: ""

                  plugin_languages: yes
                  plugin_languages_other: yes
                  plugin_languages_details: percentage, lines, bytes-size

            - name: Metrics.Isocalendar
              if: ${{ success() || failure() }}
              uses: lowlighter/metrics@latest
              with:
                  filename: metrics.isocalendar.svg
                  output_action: gist
                  committer_gist: ${{ secrets.GIST_ID }}
                  token: ${{ secrets.GITHUB_TOKEN }}
                  base: ""

                  plugin_isocalendar: yes
                  plugin_isocalendar_duration: half-year

            - name: Metrics.Leetcode
              if: ${{ success() || failure() }}
              uses: lowlighter/metrics@latest
              with:
                  filename: metrics.leetcode.svg
                  output_action: gist
                  committer_gist: ${{ secrets.GIST_ID }}
                  token: ${{ secrets.GITHUB_TOKEN }}
                  base: ""

                  plugin_leetcode: yes
                  plugin_leetcode_user: ${{ secrets.LEETCODE_USER }}

            - name: Metrics.Notable
              if: ${{ success() || failure() }}
              uses: lowlighter/metrics@latest
              with:
                  filename: metrics.notable.svg
                  output_action: gist
                  committer_gist: ${{ secrets.GIST_ID }}
                  token: ${{ secrets.GITHUB_TOKEN }}
                  base: ""

                  plugin_notable: yes
                  plugin_notable_repositories: no

            - name: Metrics.Stars
              if: ${{ success() || failure() }}
              uses: lowlighter/metrics@latest
              with:
                  filename: metrics.stars.svg
                  output_action: gist
                  committer_gist: ${{ secrets.GIST_ID }}
                  token: ${{ secrets.GITHUB_TOKEN }}
                  base: ""

                  plugin_stars: yes
                  plugin_stars_limit: 4

            - name: Metrics.Skyline
              if: ${{ success() || failure() }}
              uses: lowlighter/metrics@latest
              with:
                  filename: metrics.skyline.svg
                  output_action: gist
                  committer_gist: ${{ secrets.GIST_ID }}
                  token: ${{ secrets.GITHUB_TOKEN }}
                  base: ""

                  plugin_skyline: yes
                  plugin_skyline_frames: 120

            - name: Metrics.Dopamine
              if: ${{ success() || failure() }}
              uses: lowlighter/metrics@latest
              with:
                  filename: metrics.dopamine.svg
                  output_action: gist
                  committer_gist: ${{ secrets.GIST_ID }}
                  token: ${{ secrets.GITHUB_TOKEN }}
                  base: ""

                  config_order: steam, anilist, music, 16personalities

                  plugin_steam: yes
                  plugin_steam_token: ${{ secrets.STEAM_TOKEN }}
                  plugin_steam_user: ${{ secrets.STEAM_USER }}
                  plugin_steam_sections: player, recently-played
                  plugin_steam_recent_games_limit: 3
                  plugin_steam_achievements_limit: 2
                  plugin_steam_playtime_threshold: 0

                  plugin_anilist: yes
                  plugin_anilist_user: ${{ secrets.ANILIST_USER }}
                  plugin_anilist_medias: manga
                  plugin_anilist_sections: reading, characters
                  plugin_anilist_limit: 5

                  plugin_music: yes
                  plugin_music_provider: youtube
                  plugin_music_token: ${{ secrets.YOUTUBE_COOKIE }}
                  plugin_music_user: ${{ secrets.YOUTUBE_USER }}
                  plugin_music_mode: recent
                  plugin_music_limit: 5

                  plugin_16personalities: yes
                  plugin_16personalities_url: https://www.16personalities.com/profiles/${{ secrets.PERSONALITIES_USER }}
